# dbt clean

## Overview

`dbt clean` removes directories specified in the `clean-targets` config, typically `target/` (compiled artifacts) and `dbt_packages/` (installed packages). It's useful for resetting state before a fresh build.

**Reference**: https://docs.getdbt.com/reference/commands/clean

## Task Class: `CleanTask`

`CleanTask` extends `BaseTask` and requires minimal contextâ€”no manifest, profile, or database connection.
## Implementation Quirks

### No Profile Required

`@requires.unset_profile` indicates clean doesn't need database credentials:

```python
@requires.unset_profile
@requires.project
def clean(ctx, **kwargs):
    with CleanTask(ctx.obj["flags"], ctx.obj["project"]) as task:
        ...
```

### `--clean-project-files-only`

Controls scope of cleaning:
- Without flag: Cleans both project-level and dbt-managed directories
- With flag: Only cleans project-defined `clean-targets`

### Default Clean Targets

If not specified in `dbt_project.yml`, defaults to:
- `target/`
- `dbt_packages/`

## Flags

| Flag | Description |
|------|-------------|
| `--clean-project-files-only` | Only clean project-defined targets |

## Configuration

```yaml
# dbt_project.yml
clean-targets:
  - target
  - dbt_packages
  - logs
  - compile_output  # Custom directory
```

## Safety

`CleanTask` only removes directories explicitly listed in `clean-targets`. It won't remove:
- Source files (`models/`, `seeds/`, etc.)
- Configuration files (`dbt_project.yml`, `profiles.yml`)
- Version control (`.git/`)
