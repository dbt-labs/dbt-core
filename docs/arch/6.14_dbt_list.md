# dbt list

## Overview

`dbt list` (alias: `dbt ls`) lists resources in your dbt project matching selection criteria. It's useful for exploring the project, debugging selectors, and scripting.

**Reference**: https://docs.getdbt.com/reference/commands/list

## Task Class: `ListTask`

`ListTask` extends `GraphRunnableTask` but doesn't execute nodes. It only performs lookups against the manifest.

## Implementation Quirks

### Always Returns Success

Unlike execution commands, `list` always returns exit code 0:

### Output Modes

Four output formats via `--output`:

| Mode | Example Output |
|------|----------------|
| `selector` | `my_model`, `source:jaffle_shop.orders` |
| `name` | `my_model`, `orders` |
| `json` | `{"name": "my_model", "resource_type": "model"}` |
| `path` | `models/staging/my_model.sql` |

### `--models` vs `--select`

For backwards compatibility, both flags work but are mutually exclusive. `--models` implies `--resource-type model`.

### JSON Output Keys

Default keys in JSON output:

```python
ALLOWED_KEYS = frozenset((
    "alias", "name", "package_name", "depends_on", "tags",
    "config", "resource_type", "source_name", "original_file_path", "unique_id",
))
```

Override with `--output-keys`:

```bash
dbt ls --output json --output-keys name config.materialized
```

### Nested Key Support

`--output-keys` supports dot notation for nested values.

### Hidden Alias

`ls` is a hidden alias for `list`:

```python
-- core/dbt/cli/main.py

ls = copy(cli.commands["list"])
ls.hidden = True
cli.add_command(ls, "ls")
```

## Flags

| Flag | Description |
|------|-------------|
| `--select` | Selection criteria |
| `--exclude` | Exclude nodes |
| `--models` | Shorthand for `--select --resource-type model` |
| `--output` | Format: `selector`, `name`, `json`, `path` |
| `--output-keys` | JSON keys to include |
| `--resource-type` | Filter by type |

## Examples

```bash
# List all models
dbt ls --resource-type model

# List modified models (requires --state)
dbt ls --select state:modified --state prod-artifacts/

# Get JSON with specific fields
dbt ls --output json --output-keys name config.materialized

# Get file paths for shell scripting
dbt ls --select tag:nightly --output path | xargs wc -l
```
