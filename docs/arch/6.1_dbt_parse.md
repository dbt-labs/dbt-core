# dbt parse

## Overview

`dbt parse` parses the project and writes the manifest without executing any nodes. It's useful for validating project structure, measuring parse performance, and generating the manifest for external tools.

**Reference**: https://docs.getdbt.com/reference/commands/parse

## Task Implementation

Unlike most commands, `parse` has no dedicated Task classâ€”the work happens in the `@requires.manifest` decorator:

```python
@requires.manifest(write_perf_info=True)
def parse(ctx, **kwargs):
    # manifest generation and writing happens in @requires.manifest
    return ctx.obj["manifest"], True
```

## Implementation Quirks

### Performance Info

The `write_perf_info=True` flag causes parsing performance data to be written:

```python
@requires.manifest(write_perf_info=True)
```

This writes timing information for each parsing phase to help diagnose slow parses.

### Return Value

`parse` is unique in returning the `Manifest` object directly

Other commands return execution results like `RunExecutionResult`.

### Partial Parsing Integration

`parse` respects partial parsing settings. A full parse happens when:
- `--no-partial-parse` is specified
- `partial_parse.msgpack` is missing or invalid
- Project configuration changed

### No Compilation

`parse` only parses. It doesn't compile SQL, meaning:
- Jinja is not rendered
- `compiled_code` is not populated
- Refs/sources are extracted but not fully resolved

### Manifest Output

Writes `manifest.json` to the target directory (respects `--write-json` flag, which is enabled by default).

## Flags

| Flag | Description |
|------|-------------|
| `--partial-parse` / `--no-partial-parse` | Enable/disable partial parsing |
| `--write-json` / `--no-write-json` | Write manifest.json |

## Use Cases

1. **Validate Syntax**: Check YAML and SQL for errors
2. **Measure Performance**: Diagnose slow parsing with perf info
3. **Generate Manifest**: Create manifest for external tools (IDE plugins, CI systems)
4. **Pre-warm Cache**: Populate partial parse cache before execution
5. **CI Validation**: Ensure project parses without database access

## Performance Metrics

With `write_perf_info=True`, the following are tracked:
- File reading time
- YAML parsing time
- Per-parser timing (models, tests, sources, etc.)
- Partial parsing hit/miss
- Total parse duration
