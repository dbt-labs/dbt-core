# dbt init

## Overview

`dbt init` scaffolds a new dbt project or initializes a profile for an existing project. It creates the standard dbt directory structure and optionally configures database credentials.

**Reference**: https://docs.getdbt.com/reference/commands/init

## Task Class: `InitTask`

`InitTask` extends `BaseTask` and handles interactive project/profile setup.

## Implementation Quirks

### Minimal Context

`init` requires almost nothing—no profile, no project, no manifest:

```python
@requires.postflight
@requires.preflight
def init(ctx, **kwargs):
    with InitTask(ctx.obj["flags"]) as task:
        ...
```

### Positional Argument for Project Name

For backwards compatibility, project name can be passed as a positional argument:

```python
@click.argument("project_name", required=False)
def init(ctx, project_name=None, **kwargs):
    ...
```

### Starter Project Template

Uses a built-in starter project template is defined in `core/dbt/include/starter_project`.

### Profile Creation Strategies

Three methods to create a profile:

1. **From adapter sample**: Uses adapter's `sample_profiles.yml`
2. **From project template**: Uses project's profile template if provided
3. **Interactive prompts**: Asks user for connection details

### Adapter Discovery

Discovers available adapters from installed packages:

```python
adapter_names = _get_adapter_plugin_names()
# Returns list like ['postgres', 'snowflake', 'bigquery', ...]
```

## Flags

| Flag | Description |
|------|-------------|
| `--skip-profile-setup` | Skip interactive profile configuration |

## Created Structure

```
my_project/
├── dbt_project.yml
├── README.md
├── models/
│   └── example/
│       ├── my_first_dbt_model.sql
│       ├── my_second_dbt_model.sql
│       └── schema.yml
├── analyses/
├── macros/
├── seeds/
├── snapshots/
└── tests/
```

## Interactive Flow

1. **Project Name**: Prompt for name (if not provided)
2. **Adapter Selection**: Choose from installed adapters
3. **Connection Details**: Adapter-specific prompts (host, database, credentials)
4. **Profile Location**: Written to `~/.dbt/profiles.yml`
