version: 2
models:
  - name: outer
    description: The outer table
    docs:
      show: true
      node_color: purple
    deprecation_date: "2052-05-01"
    access: public
    columns:
      - name: id
        description: The id value
        data_tests:
          - unique
          - not_null
    config:
      materialized: table
      sql_header: "SELECT 1 as header;"
      on_configuration_change: apply
      unique_key: id
      batch_size: day
      begin: "2020-01-01"
      lookback: 5
      concurrent_batches: false
      enabled: true
      tags: "string_tag"
      pre_hook: "SELECT 'string_pre_hook' as my_pre_hook;"
      post_hook: "SELECT 'string_post_hook' as my_post_hook;"
      database: "test_database"
      schema: "test"
      alias: "outer_alias"
      persist_docs:
        relation: true
        columns: true
      full_refresh: false
      meta:
        my_custom_property: "string_meta"
      grants:
        select: ["a_grant"]
      contract:
        enforce: true
        alias_types: true
    constraints:
      - type: primary_key
        columns: ["id"]
        warn_unsupported: false
      - type: foreign_key
        columns: ["id"]
        to: source('my_source', 'my_table')
        to_columns: ["id"]
      - type: check
        columns: ["id"]
        expression: "id > 0"
        name: "Check that id is greater than 0"
  - name: metricflow_time_spine
    description: Day time spine
    time_spine:
      standard_granularity_column: date_day
    columns:
      - name: date_day
        granularity: day
    config:
      event_time: ts_second
      tags:
        - "list"
        - "of"
        - "tags"
      pre_hook:
        - "SELECT 'string_pre_hook' as my_pre_hook;"
      post_hook:
        - "SELECT 'string_post_hook' as my_post_hook;"
  - name: metricflow_time_spine_second
    description: Second time spine
    columns:
      - name: ts_second
        granularity: second

sources:
  - name: my_source
    tables:
      - name: my_table
